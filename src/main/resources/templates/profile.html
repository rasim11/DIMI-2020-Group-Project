<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <title>PM|Профиль</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href="/css/imgProfile.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>

<header th:insert="blocks/header :: header"></header>

<div align="center" class="container pt-4 pb-4">
    <div sec:authorize="!isAuthenticated()">
        <h2 class="text-primary" th:text="${msgErr}"/>
    </div>
    <div sec:authorize="isAuthenticated()">
        <img src="/img/user-default.png" class="mb-4"/>
        <h4 class="mb-4" th:text="${user.getFirstname() + ' ' + user.getMiddlename() + ' ' + user.getLastname() }"/>
        <p th:text="'Дата регистрации: '+${user.dateToString(user.getRegDate())}"/>
        <div th:if="${isCurUser}">
            <p th:text="'Электронная почта: '+${user.getEmail()}"/>
            <p th:text="'Номер телефона: '+${user.getPhoneNumber()}"/>
        </div>
        <div th:if="${roleName} == 'Пользователь'">
            <p th:text="'Опубликованных проблем: '+${user.getTasksCount()}"/>
            <a href="#"><p>Проблемы пользователя</p></a>
        </div>
    </div>
</div>

<footer th:insert="blocks/footer :: footer"></footer>

</body>
</html>