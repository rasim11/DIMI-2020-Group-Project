<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="#">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="/css/task.css" rel="stylesheet">
</head>
<body>
<header th:insert="blocks/header :: header"></header>
    <div class="body">
        <form class="task_form" th:object="${task}" action="/api/v1/task-management/task-post" method="post" enctype="multipart/form-data" onsubmit="return validation()">
            <div class="form-group">
                <img class="card-img-top" th:src="*{'data:image/jpg;image/png;base64,'+taskImage}" id="taskImage" width="500" alt=""/>
                <input type="file" id="loadImage" name="image" accept=".jpg, .png, .jpeg" style="display: none;">
                <label for="loadImage" class="btn btn-link"  style="padding: 0;text-decoration: none;">Прикрепить изображение
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-paperclip" viewBox="0 0 16 16">
                        <path d="M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0V3z"/>
                    </svg>
                </label>
                <div class="imagePreview">
                    <button id="delImage"class="btn">Удалить</button>
                </div>
            </div>
            <div class="form-group">
                <label>Название проблемы</label><span class="red">*</span></label>
                <input type="text" class="form-control required" id="problemName" name="taskName" th:value="${task.taskName}">
                <small></small>
            </div>
            <div class="form-group">
                <label>Описание</label><span class="red">*</span>
                <textarea class="form-control required"rows="3" name="taskDescription" th:field="${task.taskDescription}"></textarea>
                <small></small>
            </div>
            <div class="form-group">
                <label>Адрес</label><span class="red">*</span></label>
                <input type="text" class="form-control  required" id="adress" name="taskLocation"th:value="${task.taskLocation}">
                <small></small>
            </div>
            <div class="form-group">
                <label>Комментарий</label><span class="red">*</span>
                <input  type="radio" id="on"  name="commentAllow" th:checked="${task.commentAllow==true}?'checked'"  value="true" > <label for="on">вкл</label> / </input>
                <input  type="radio" id="off" name="commentAllow" th:checked="${task.commentAllow==false}?'checked'"  value="false"> <label for="off">выкл</label></input>
                <br>
                <small></small>
            </div>
            <input type="hidden" id="currentImg" name="taskImage">
            <input type="hidden" name="id" th:value="${task.id}">
            <button type="submit" class="btn btn-primary">Изменить</button>
        </form>
    </div>
<footer th:insert="blocks/footer :: footer"></footer>
<script src="/js/task.js" type="text/javascript"></script>
</body>
</html>
